@page "{id:int}"
@model CitasEPS.Pages.Appointments.ReviewDoctorProposalModel
@{
    ViewData["Title"] = "Revisar Propuesta de Reagendamiento del Doctor";
}

<h1>@ViewData["Title"]</h1>
<hr />

@if (Model.AppointmentToReview == null)
{
    <div class="alert alert-danger">No se encontró la cita o la propuesta.</div>
    <a asp-page="./Index" class="btn btn-secondary">Volver a Mis Citas</a>
}
else
{
    <div class="alert alert-warning" role="alert">
        <h4 class="alert-heading">Propuesta de Nuevo Horario</h4>
        <p>
            Su doctor, <strong>@Model.DoctorName</strong>, ha propuesto un nuevo horario para su cita.
        </p>
        <hr>
        <p class="mb-1"><strong>Horario Actual (sin confirmar):</strong> @Model.CurrentDateTime</p>
        <p class="mb-0"><strong>Nuevo Horario Propuesto:</strong> <strong class="text-primary">@Model.ProposedDateTime</strong></p>
    </div>

    <p>Por favor, revise el nuevo horario propuesto y confirme si le funciona o rechace la propuesta.</p>

    <form method="post" class="mt-3">
        <input type="hidden" asp-for="Id" />
        <button type="submit" asp-page-handler="Confirm" class="btn btn-success me-2">
            <i class="bi bi-check-lg"></i> Confirmar Nuevo Horario
        </button>
        <button type="submit" asp-page-handler="Reject" class="btn btn-danger me-2">
            <i class="bi bi-x-lg"></i> Rechazar Propuesta
        </button>
        <a asp-page="./Index" class="btn btn-secondary">Volver a Mis Citas</a>
    </form>

    <div class="mt-4">
        <small class="text-muted">
            Si rechaza la propuesta, la cita volverá a su horario original (@Model.CurrentDateTime) y permanecerá sin confirmar.
            Puede entonces proponer un horario diferente si lo desea, o contactar al consultorio.
        </small>
    </div>
} 